### ==================================================
### BARBEARIA API - FLUXO BARBEIRO
### ==================================================

@baseUrl = http://localhost:8080
@contentType = application/json

# üîê TOKEN DO BARBEIRO - Execute o login primeiro!
@barbeiroToken = {{barbeiro_login.response.body.token}}

### REGISTRAR BARBEIRO (se necess√°rio)
POST {{baseUrl}}/api/auth/register-barbeiro
Content-Type: {{contentType}}

{
  "email": "barbeiro.completo@gmail.com",
  "password": "barbeiro123"
}

### LOGIN COMO BARBEIRO
# @name barbeiro_login
POST {{baseUrl}}/api/auth/login
Content-Type: {{contentType}}

{
  "email": "barbeiro.completo@gmail.com",
  "password": "barbeiro123"
}

> {%
  if (response.status === 200) {
    client.global.set("barbeiroToken", response.body.token);
    client.log("‚úÖ Barbeiro logado com sucesso!");
    client.log("üé≠ Role: " + response.body.role);
  }
%}

### GERENCIAMENTO DE SERVI√áOS

### Criar Servi√ßo - Corte Social
# @name criar_servico_corte
POST {{baseUrl}}/api/barbeiro/servicos
Authorization: Bearer {{barbeiroToken}}
Content-Type: {{contentType}}

{
  "nome": "Corte Social",
  "descricao": "Corte de cabelo tradicional masculino",
  "valor": 30.00,
  "tempoEstimadoMinutos": 30
}

### Criar Servi√ßo - Barba
POST {{baseUrl}}/api/barbeiro/servicos
Authorization: Bearer {{barbeiroToken}}
Content-Type: {{contentType}}

{
  "nome": "Barba",
  "descricao": "Aparar e modelar barba",
  "valor": 20.00,
  "tempoEstimadoMinutos": 20
}

### Criar Servi√ßo - Pacote Completo
POST {{baseUrl}}/api/barbeiro/servicos
Authorization: Bearer {{barbeiroToken}}
Content-Type: {{contentType}}

{
  "nome": "Corte + Barba",
  "descricao": "Pacote completo corte de cabelo e barba",
  "valor": 45.00,
  "tempoEstimadoMinutos": 50
}

### Listar Meus Servi√ßos
GET {{baseUrl}}/api/barbeiro/servicos
Authorization: Bearer {{barbeiroToken}}

### Listar Todos os Servi√ßos Ativos do Sistema
GET {{baseUrl}}/api/barbeiro/servicos/todos
Authorization: Bearer {{barbeiroToken}}

### Ativar/Desativar Servi√ßo
PATCH {{baseUrl}}/api/barbeiro/servicos/{{criar_servico_corte.response.body.id}}/toggle
Authorization: Bearer {{barbeiroToken}}

###  CONFIGURA√á√ÉO DE AGENDA

### Criar Hor√°rio de Trabalho - Segunda-feira
POST {{baseUrl}}/api/barbeiro/agenda
Authorization: Bearer {{barbeiroToken}}
Content-Type: {{contentType}}

{
  "diaSemana": "MONDAY",
  "horaInicio": "09:00",
  "horaFim": "18:00",
  "horaAlmocoInicio": "12:00",
  "horaAlmocoFim": "13:00"
}

### Criar Hor√°rio de Trabalho - Ter√ßa-feira
POST {{baseUrl}}/api/barbeiro/agenda
Authorization: Bearer {{barbeiroToken}}
Content-Type: {{contentType}}

{
  "diaSemana": "TUESDAY",
  "horaInicio": "09:00",
  "horaFim": "18:00",
  "horaAlmocoInicio": "12:00",
  "horaAlmocoFim": "13:00"
}

### Listar Minha Agenda
GET {{baseUrl}}/api/barbeiro/agenda
Authorization: Bearer {{barbeiroToken}}

###  VISUALIZA√á√ÉO DE AGENDAMENTOS

### Listar Agendamentos do Barbeiro (CORRIGIDO)
GET {{baseUrl}}/api/agendamentos/barbeiro
Authorization: Bearer {{barbeiroToken}}

### 6Ô∏è‚É£ üîç DEBUG E CONSULTAS

### Debug - Contexto de Seguran√ßa
GET {{baseUrl}}/api/debug/security-context
Authorization: Bearer {{barbeiroToken}}

### Listar Todos os Barbeiros Ativos
GET {{baseUrl}}/api/barbeiros
Authorization: Bearer {{barbeiroToken}}

### Listar Servi√ßos P√∫blicos (NOVO)
GET {{baseUrl}}/api/servicos
Authorization: Bearer {{barbeiroToken}}